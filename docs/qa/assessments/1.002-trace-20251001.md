# Requirements Traceability Matrix: Story 1.002 - Sistema de Atividades Compostas

Date: 2025-10-01
Reviewer: Quinn (Test Architect)

## Story: 1.002 - Sistema de Atividades Compostas

**Status**: PLANNING - Traceability baseline for implementation

---

## Coverage Summary

- **Total Requirements**: 11 (3 ACs with sub-requirements + 5 DoD)
- **Fully Covered**: 10 (91%)
- **Partially Covered**: 1 (9%)
- **Not Covered**: 0 (0%)

**Overall Trace Status**: EXCELLENT - All requirements traceable to planned tests

---

## Requirement Mappings

### AC-1: Activity Composition

#### AC-1.1: Sequence modules in the specified order

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-002` - Sequence modules in specified order
  - **Given**: Activity config with modules ordered [1, 2, 3]
  - **When**: ModuleSequencer processes the configuration
  - **Then**: Modules are loaded and executed in exact order 1 → 2 → 3

- **Integration Test**: `1.002-INT-001` - Create 3-module composite activity
  - **Given**: Activity config: EstadoJeremias → BateriaRápida → AutoAvaliação
  - **When**: ActivityOrchestrator creates the activity
  - **Then**: Modules appear in correct sequence, student progresses 1 → 2 → 3

#### AC-1.2: Validate module compatibility

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-003` - Validate module compatibility
  - **Given**: Module compatibility matrix defining valid combinations
  - **When**: Activity config with incompatible sequence (AutoAvaliação first)
  - **Then**: Validation error: "AutoAvaliação requires data from previous module"

- **Integration Test**: `1.002-INT-003` - Create activity with incompatible modules
  - **Given**: Activity attempting to place data-dependent module first
  - **When**: Activity creation is attempted
  - **Then**: Error displayed to teacher, activity not created

#### AC-1.3: Calculate total estimated duration

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-004` - Calculate total estimated duration
  - **Given**: 3 modules with durations [2 min, 15 min, 5 min] + 2 transitions
  - **When**: Duration calculation runs
  - **Then**: Total = 22 min (sum) + 1 min (transitions) = 23 min

- **E2E Test**: `1.002-E2E-005` - Duration estimation accuracy
  - **Given**: Activity with estimated duration 20 min
  - **When**: Student completes activity (actual time tracked)
  - **Then**: Actual time within ±10% of estimate (18-22 min)

#### AC-1.4: Preview the complete activity flow

**Coverage**: FULL

**Test Mappings**:

- **Integration Test**: `1.002-INT-002` - Preview complete activity flow
  - **Given**: Configured activity with 5 modules
  - **When**: Teacher requests preview
  - **Then**: All module summaries shown in sequence, duration displayed, data flows indicated

- **E2E Test**: `1.002-E2E-001` - Teacher creates and previews activity
  - **Given**: Teacher in activity creation UI
  - **When**: Teacher configures modules and clicks "Preview"
  - **Then**: Preview shows complete flow, teacher can navigate through simulated activity

---

### AC-2: Inter-Module Data Flow

#### AC-2.1: Pass relevant data to the next module

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-005` - Transform data between module types
  - **Given**: BateriaRápida output: { score: 0.85, conceptsAttempted: ["divisão"] }
  - **When**: DataPipeline transforms for AutoAvaliação input
  - **Then**: AutoAvaliação receives: { previousScore: 0.85, concepts: ["divisão"] }

- **Integration Test**: `1.002-INT-004` - Pass data from BateriaRápida to AutoAvaliação
  - **Given**: BateriaRápida module completes with score data
  - **When**: Transition to AutoAvaliação occurs
  - **Then**: AutoAvaliação renders with context from BateriaRápida results

- **E2E Test**: `1.002-E2E-002` - Data flows correctly in full activity
  - **Given**: Student completes full 3-module activity
  - **When**: Each module transition occurs
  - **Then**: Each module receives correct context from previous, final analytics include all data

#### AC-2.2: Maintain context across transitions

**Coverage**: FULL

**Test Mappings**:

- **Integration Test**: `1.002-INT-005` - Maintain context across all transitions
  - **Given**: 5-module activity with complex data flows
  - **When**: Student progresses through all modules
  - **Then**: ActivityOrchestrator maintains consistent state, no context lost

- **E2E Test**: `1.002-E2E-002` - Data flows correctly in full activity
  - **Given**: Multi-module activity with data dependencies
  - **When**: Student completes activity
  - **Then**: Final state contains complete context history from all modules

#### AC-2.3: Preserve student responses for analytics

**Coverage**: FULL

**Test Mappings**:

- **Integration Test**: `1.002-INT-006` - Preserve student responses for analytics
  - **Given**: Student completes modules with various responses
  - **When**: Each module completes and transitions
  - **Then**: All responses persisted to Supabase, accessible for analytics

- **Integration Test**: `1.002-INT-011` - Persist to Supabase on transitions
  - **Given**: Module completion with student data
  - **When**: Transition to next module
  - **Then**: Data saved to Supabase before transition, confirmed saved

#### AC-2.4: Handle data transformation if needed

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-005` - Transform data between module types
  - **Given**: Module A output schema incompatible with Module B input
  - **When**: Data pipeline applies transformation rules
  - **Then**: Data converted to Module B format, all required fields present

- **Unit Test**: `1.002-UNIT-007` - Handle missing/invalid data gracefully
  - **Given**: Module provides incomplete data for next module
  - **When**: DataPipeline processes the data
  - **Then**: Missing fields filled with defaults, invalid data sanitized, module continues

- **Integration Test**: `1.002-INT-007` - Transform data with field mapping
  - **Given**: Complex data flow with field renaming (score → previousScore)
  - **When**: Transformation occurs
  - **Then**: Fields correctly mapped, types preserved, no data loss

---

### AC-3: Progress Tracking

#### AC-3.1: Show progress indicator (3/5 modules complete)

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-008` - Calculate progress percentage
  - **Given**: Activity with 5 modules, 3 completed
  - **When**: Progress calculation runs
  - **Then**: Returns "3/5 modules (60%)"

- **Integration Test**: `1.002-INT-010` - Show accurate progress indicator
  - **Given**: Activity in progress (module 2 of 3)
  - **When**: Progress component renders
  - **Then**: Shows "2/3 modules" with visual progress bar at 67%

- **E2E Test**: `1.002-E2E-004` - Progress indicator updates correctly
  - **Given**: Student starting activity
  - **When**: Student completes each module
  - **Then**: Progress indicator updates (1/3, 2/3, 3/3), visual feedback clear

#### AC-3.2: Save intermediate progress

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-010` - Save intermediate progress state
  - **Given**: Activity state at module 2, with module 1 completed
  - **When**: ProgressTracker.save() is called
  - **Then**: Complete state (including module 1 data) saved to localStorage and Supabase

- **Integration Test**: `1.002-INT-008` - Auto-save every 30 seconds
  - **Given**: Student working on module 2 for 90 seconds
  - **When**: Auto-save timer triggers
  - **Then**: Progress saved 3 times (0s, 30s, 60s, 90s), all saves successful

#### AC-3.3: Allow resumption if interrupted

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-011` - Detect and handle resume scenarios
  - **Given**: Activity state with sessionInterrupted: true
  - **When**: Activity loads
  - **Then**: Resume flow triggered, student sees "Resume from Module 2?" prompt

- **Integration Test**: `1.002-INT-009` - Resume from any module position
  - **Given**: Saved state at module 3 of 5
  - **When**: Student returns to activity
  - **Then**: Activity resumes at module 3, modules 1-2 data preserved, student can continue

- **E2E Test**: `1.002-E2E-003` - Resume interrupted activity
  - **Given**: Student closes browser during module 2
  - **When**: Student returns (browser refresh or new session)
  - **Then**: Activity detects interruption, offers resume, loads at exact position with all data intact

#### AC-3.4: Track time spent per module

**Coverage**: FULL

**Test Mappings**:

- **Unit Test**: `1.002-UNIT-009` - Track time spent per module
  - **Given**: Module 1 starts at T0, completes at T0+120s
  - **When**: Time tracking calculates duration
  - **Then**: Module 1 duration recorded as 120 seconds (2 minutes)

- **Integration Test**: `1.002-INT-010` - Show accurate progress indicator (includes time)
  - **Given**: Activity with time tracking enabled
  - **When**: Student completes modules
  - **Then**: Each module shows actual time spent, total time displayed

- **E2E Test**: `1.002-E2E-004` - Progress indicator updates correctly
  - **Given**: Student progressing through activity
  - **When**: Each module completes
  - **Then**: Time per module tracked, total elapsed time shown

---

### Definition of Done Requirements

#### DoD-1: Activity composition from multiple modules working

**Coverage**: FULL

**Test Mappings**:
- **Integration Test**: `1.002-INT-001` - Create 3-module composite activity
- **E2E Test**: `1.002-E2E-001` - Teacher creates and previews activity

**Verification**:
  - **Given**: Teacher can configure 3+ modules into an activity
  - **When**: Activity is created and run
  - **Then**: All modules execute in sequence, composition works end-to-end

#### DoD-2: Data flows between compatible modules

**Coverage**: FULL

**Test Mappings**:
- **Integration Test**: `1.002-INT-004` - BateriaRápida → AutoAvaliação data flow
- **Integration Test**: `1.002-INT-007` - Complex data transformation
- **E2E Test**: `1.002-E2E-002` - Full activity data flow

**Verification**:
  - **Given**: Modules configured with data flow
  - **When**: Activity runs
  - **Then**: Data passes correctly, transformations work, no data loss

#### DoD-3: Progress tracking across full activity

**Coverage**: FULL

**Test Mappings**:
- **Integration Test**: `1.002-INT-010` - Progress indicator accuracy
- **E2E Test**: `1.002-E2E-004` - Progress updates correctly

**Verification**:
  - **Given**: Student progressing through activity
  - **When**: Modules complete
  - **Then**: Progress shown accurately (X/Y modules), time tracked

#### DoD-4: Interruption/resumption handling

**Coverage**: FULL

**Test Mappings**:
- **Integration Test**: `1.002-INT-009` - Resume from any position
- **E2E Test**: `1.002-E2E-003` - Resume interrupted activity

**Verification**:
  - **Given**: Activity interrupted (browser close, network failure)
  - **When**: Student returns
  - **Then**: Activity resumes at exact position, no data lost

#### DoD-5: Duration estimation accurate (±10%)

**Coverage**: FULL

**Test Mappings**:
- **Unit Test**: `1.002-UNIT-004` - Duration calculation
- **E2E Test**: `1.002-E2E-005` - Duration estimation accuracy

**Verification**:
  - **Given**: Activity with estimated duration
  - **When**: Student completes activity
  - **Then**: Actual time within ±10% of estimate

#### DoD-6: Unit tests for orchestration logic

**Coverage**: FULL (12 unit tests designed)

**Test Mappings**: All `1.002-UNIT-001 through UNIT-012` cover orchestration

#### DoD-7: Integration tests for sample activities

**Coverage**: FULL (14 integration tests designed)

**Test Mappings**: All `1.002-INT-001 through INT-014` cover multi-module scenarios

#### DoD-8: Teacher can preview composed activities

**Coverage**: FULL

**Test Mappings**:
- **Integration Test**: `1.002-INT-002` - Activity preview
- **E2E Test**: `1.002-E2E-001` - Teacher creation flow with preview

#### DoD-9: Student experience smooth across transitions

**Coverage**: PARTIAL

**Test Mappings**:
- **Integration Test**: `1.002-INT-013` - Module transition time (<1s)
- **E2E Test**: `1.002-E2E-002` - Full activity flow (subjective smoothness)

**Gap**: "Smooth" is subjective. Quantified as <1s transition time in performance tests.
**Recommendation**: Add explicit UX acceptance criteria for "smooth" (animation duration, no flicker, etc.)

---

## Critical Gaps Analysis

### Gap 1: Subjective UX Quality ("Smooth Transitions")

**Requirement**: DoD-9 - Student experience smooth across transitions
**Current Coverage**: PARTIAL (performance measured, UX quality subjective)
**Severity**: LOW (UX polish, caught in user testing)
**Recommended Test**:
- **ID**: `1.002-E2E-006` - Transition smoothness validation
- **Type**: E2E with visual assertions
- **Description**: Verify no UI flicker, consistent animations, clear state changes

**Mitigation**: Manual UX review + performance targets (<1s transition) provide objective baseline

---

## Requirements Not Testable (Addressed by Process)

### Teacher can preview activities

**Why partially manual**: Preview UI/UX quality is subjective
**Verification method**: E2E test validates functionality, UX review validates experience
**DoD check**: Preview exists and is functional

---

## Test Coverage by Requirement Type

| Requirement Type | Total | Full Coverage | Partial | None |
|---|---|---|---|---|
| Acceptance Criteria | 3 (12 sub) | 12 | 0 | 0 |
| Definition of Done | 9 items | 8 | 1 | 0 |
| Performance | 3 implicit | 3 | 0 | 0 |
| Security | 3 implicit | 3 | 0 | 0 |

**Overall**: 91% full coverage, 9% partial, 0% gaps

---

## Given-When-Then Summary by AC

### AC-1 Summary (8 tests)

**Given**: Teacher configures multi-module activity with specific order and properties
**When**: Activity is created, validated, and previewed
**Then**: Modules sequence correctly, compatibility validated, duration calculated, preview shown

**Critical Path**: Config → Validation → Sequencing → Duration → Preview

### AC-2 Summary (10 tests)

**Given**: Modules with data dependencies and transformations
**When**: Activity executes, data flows between modules
**Then**: Data transformed correctly, context maintained, student responses preserved

**Critical Path**: Module Output → Pipeline Transform → Validation → Next Module Input → Persistence

### AC-3 Summary (12 tests)

**Given**: Activity in progress with multiple modules
**When**: Student completes modules, activity interrupted, or resumed
**Then**: Progress tracked, displayed, saved, and restored correctly

**Critical Path**: Progress Calculation → Auto-save → State Persistence → Resume Detection → State Recovery

---

## Test Data Scenarios Mapped

### Happy Path Scenarios (Green)

1. **3-Module Activity Flow** (EstadoJeremias → BateriaRápida → AutoAvaliação)
   - Tests: INT-001, INT-004, E2E-002

2. **5-Module Diagnostic Activity** (Complete data flow)
   - Tests: INT-005, INT-014, E2E-001

3. **Progress Tracking & Resumption**
   - Tests: INT-008, INT-009, INT-010, E2E-003

### Error Scenarios (Red)

4. **Incompatible Module Sequence**
   - Tests: UNIT-003, INT-003

5. **Invalid Data Transformation**
   - Tests: UNIT-007, SEC-001

6. **Network Failure During Save**
   - Tests: INT-008 (retry logic), E2E-003 (recovery)

7. **Concurrent Activity (Same Student, Two Tabs)**
   - Tests: E2E-006 (future test)

### Edge Cases (Yellow)

8. **Performance Boundaries**
   - Tests: UNIT-012 (pipeline <50ms), INT-012 (orchestration <500ms), INT-013 (transition <1s)

9. **Complex Data Flows**
   - Tests: INT-007 (field mapping), UNIT-005 (transformations)

10. **Duration Estimation Accuracy**
    - Tests: UNIT-004 (calculation), E2E-005 (actual vs estimate)

---

## Risk-Based Test Priority

### P0 Tests (Must Pass - Block Release)

- **AC-1**: UNIT-001, UNIT-002, UNIT-003, INT-001
- **AC-2**: UNIT-005, UNIT-006, UNIT-007, INT-004, INT-005, INT-006
- **AC-3**: UNIT-008, UNIT-010, INT-008, INT-009, INT-010, E2E-003
- **Performance**: UNIT-012, INT-012, INT-013
- **Security**: SEC-001, SEC-002

**Rationale**: Core state management, data flow integrity, progress persistence, critical performance

### P1 Tests (Should Pass - Ship with Known Issues)

- **AC-1**: UNIT-004, INT-002, INT-003, E2E-001
- **AC-2**: INT-007, INT-011, E2E-002
- **AC-3**: UNIT-009, UNIT-011, E2E-004
- **Performance**: INT-014, E2E-005
- **Security**: SEC-003

**Rationale**: Teacher UX, analytics completeness, duration accuracy, data isolation

### P2 Tests (Nice to Have - Future Optimization)

- **Concurrent activities**: E2E-006
- **Visual smoothness**: E2E validation (subjective)

**Rationale**: Edge cases, UX polish

---

## Traceability Matrix Export

### CSV Format (for import to test management tools)

```csv
Requirement ID,Requirement Description,Test ID,Test Level,Priority,Coverage,Notes
AC-1.1,Sequence modules in specified order,1.002-UNIT-002,Unit,P0,FULL,Sequencing logic
AC-1.1,Sequence modules in specified order,1.002-INT-001,Integration,P0,FULL,3-module activity
AC-1.2,Validate module compatibility,1.002-UNIT-003,Unit,P0,FULL,Compatibility matrix
AC-1.2,Validate module compatibility,1.002-INT-003,Integration,P1,FULL,Invalid sequence rejection
AC-1.3,Calculate total estimated duration,1.002-UNIT-004,Unit,P1,FULL,Duration calculation
AC-1.3,Calculate total estimated duration,1.002-E2E-005,E2E,P2,FULL,Estimation accuracy ±10%
AC-1.4,Preview complete activity flow,1.002-INT-002,Integration,P1,FULL,Preview functionality
AC-1.4,Preview complete activity flow,1.002-E2E-001,E2E,P1,FULL,Teacher preview UX
AC-2.1,Pass relevant data to next module,1.002-UNIT-005,Unit,P0,FULL,Data transformation
AC-2.1,Pass relevant data to next module,1.002-INT-004,Integration,P0,FULL,BateriaRápida → AutoAvaliação
AC-2.1,Pass relevant data to next module,1.002-E2E-002,E2E,P0,FULL,Full activity data flow
AC-2.2,Maintain context across transitions,1.002-INT-005,Integration,P0,FULL,5-module context
AC-2.2,Maintain context across transitions,1.002-E2E-002,E2E,P0,FULL,Complete context history
AC-2.3,Preserve student responses,1.002-INT-006,Integration,P0,FULL,Analytics persistence
AC-2.3,Preserve student responses,1.002-INT-011,Integration,P1,FULL,Supabase persistence
AC-2.4,Handle data transformation,1.002-UNIT-005,Unit,P0,FULL,Schema transformation
AC-2.4,Handle data transformation,1.002-UNIT-007,Unit,P0,FULL,Missing data handling
AC-2.4,Handle data transformation,1.002-INT-007,Integration,P1,FULL,Field mapping
AC-3.1,Show progress indicator,1.002-UNIT-008,Unit,P0,FULL,Progress calculation
AC-3.1,Show progress indicator,1.002-INT-010,Integration,P0,FULL,Visual indicator
AC-3.1,Show progress indicator,1.002-E2E-004,E2E,P1,FULL,Real-time updates
AC-3.2,Save intermediate progress,1.002-UNIT-010,Unit,P0,FULL,Save logic
AC-3.2,Save intermediate progress,1.002-INT-008,Integration,P0,FULL,Auto-save 30s
AC-3.3,Allow resumption if interrupted,1.002-UNIT-011,Unit,P1,FULL,Resume detection
AC-3.3,Allow resumption if interrupted,1.002-INT-009,Integration,P0,FULL,Resume from any position
AC-3.3,Allow resumption if interrupted,1.002-E2E-003,E2E,P0,FULL,Browser refresh recovery
AC-3.4,Track time spent per module,1.002-UNIT-009,Unit,P0,FULL,Time tracking logic
AC-3.4,Track time spent per module,1.002-INT-010,Integration,P0,FULL,Time display
AC-3.4,Track time spent per module,1.002-E2E-004,E2E,P1,FULL,Total elapsed time
DOD-1,Activity composition working,1.002-INT-001,Integration,P0,FULL,Multi-module composition
DOD-1,Activity composition working,1.002-E2E-001,E2E,P1,FULL,Teacher creation flow
DOD-2,Data flows between modules,1.002-INT-004,Integration,P0,FULL,Data flow validated
DOD-2,Data flows between modules,1.002-INT-007,Integration,P1,FULL,Complex transformations
DOD-2,Data flows between modules,1.002-E2E-002,E2E,P0,FULL,Full flow E2E
DOD-3,Progress tracking working,1.002-INT-010,Integration,P0,FULL,Progress indicator
DOD-3,Progress tracking working,1.002-E2E-004,E2E,P1,FULL,Progress updates
DOD-4,Interruption/resumption working,1.002-INT-009,Integration,P0,FULL,Resume logic
DOD-4,Interruption/resumption working,1.002-E2E-003,E2E,P0,FULL,Resume E2E
DOD-5,Duration estimation ±10%,1.002-UNIT-004,Unit,P1,FULL,Calculation
DOD-5,Duration estimation ±10%,1.002-E2E-005,E2E,P2,FULL,Actual validation
DOD-6,Unit tests for orchestration,1.002-UNIT-*,Unit,P0,FULL,12 unit tests
DOD-7,Integration tests for activities,1.002-INT-*,Integration,P0,FULL,14 integration tests
DOD-8,Teacher preview working,1.002-INT-002,Integration,P1,FULL,Preview functionality
DOD-8,Teacher preview working,1.002-E2E-001,E2E,P1,FULL,Preview E2E
DOD-9,Smooth student experience,1.002-INT-013,Integration,P0,PARTIAL,Transition time <1s
DOD-9,Smooth student experience,1.002-E2E-002,E2E,P0,PARTIAL,Subjective smoothness
```

---

## Recommendations for Implementation

### Phase 1: Create Test Infrastructure (Week 1)

1. **Set up test frameworks**: Vitest + React Testing Library + Playwright (reuse US-001)
2. **Create activity fixtures**: Valid/invalid activity configs in shared module
3. **Mock Supabase test instance**: For progress persistence testing
4. **Configure state testing utils**: Helpers for state creation/validation

### Phase 2: Implement P0 Tests (Weeks 2-3)

1. **Unit tests**: UNIT-001 through UNIT-012 (orchestration, sequencing, data flow, progress)
2. **Integration tests**: INT-001, INT-004, INT-005, INT-006, INT-008, INT-009, INT-010, INT-012, INT-013
3. **E2E tests**: E2E-002, E2E-003
4. **Security tests**: SEC-001, SEC-002

**Gate**: Cannot proceed to implementation without P0 test suite ready

### Phase 3: Implement P1 Tests (During Development)

1. **Add remaining unit tests** as components are built
2. **Add integration tests** for teacher UX and complex flows
3. **Add E2E tests** for complete user journeys

### Phase 4: Address Gaps (Pre-Launch)

1. **Add concurrent activity testing**: E2E-006 for multi-tab scenarios
2. **Validate duration accuracy**: Track actual vs estimated over time
3. **UX polish testing**: Transition smoothness, visual feedback

---

## Key Principles Applied

✓ **Every requirement testable**: All ACs and DoD items mapped to specific tests
✓ **Given-When-Then clarity**: Clear test scenarios for each requirement
✓ **Risk-based prioritization**: P0 tests cover critical state management and data integrity
✓ **Multi-level coverage**: Unit for logic, integration for orchestration, E2E for journeys
✓ **Gap identification**: 1 partial gap identified with clear mitigation
✓ **Actionable recommendations**: Phased test implementation plan provided

---

## Integration with Quality Gates

**Gate Trace Block** (for inclusion in gate file):

```yaml
trace:
  totals:
    requirements: 11
    full: 10
    partial: 1
    none: 0
  coverage_pct: 91
  planning_ref: 'docs/qa/assessments/1.002-test-design-20251001.md'
  partial_coverage:
    - ac: 'DoD-9'
      reason: '"Smooth" is subjective, quantified as <1s transition'
      mitigation: 'Performance tests + manual UX review'
  notes: 'Excellent traceability - all critical requirements fully mapped'
  dependency_check: 'US-001 must be PASS before US-002 implementation'
```

**Recommended Gate Status Contribution**: PASS (with noted partial gap acceptable for MVP)

---

## State Management Traceability (Critical Focus)

**State Machine Transitions** (All testable):

| State Transition | Test Coverage | AC Mapping |
|---|---|---|
| not_started → in_progress | INT-001 | AC-3 (Progress) |
| Module N complete → Module N+1 start | INT-005 | AC-1 (Sequence), AC-2 (Data flow) |
| in_progress → persisted (auto-save) | INT-008 | AC-3.2 (Save progress) |
| persisted → recovered (resume) | INT-009 | AC-3.3 (Resumption) |
| in_progress → interrupted → resumed | E2E-003 | AC-3.3 (Interruption) |
| All modules complete → completed | E2E-002 | AC-3 (Progress) |

**Every state transition has explicit test coverage.**
